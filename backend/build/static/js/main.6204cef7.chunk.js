(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{40:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},61:function(e,t){},97:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(24),s=a.n(c),i=(a(40),a(1)),r="".concat("https://accounts.spotify.com/authorize","?client_id=").concat("7edf92de95194f8a8d4da091d1380be9","&response_type=code&redirect_uri=").concat("http://localhost:3000","&scope=").concat(["user-read-currently-playing","user-read-recently-played","user-read-playback-state","user-top-read","user-modify-playback-state","user-read-email","user-library-read","user-read-private","streaming"].join("%20")),o=function(){return Object(i.jsxs)("div",{className:"login-container",children:[Object(i.jsx)("h1",{className:"login-header",children:"Spotify"}),Object(i.jsx)("a",{className:"login-btn",title:"login-button",href:r,children:"Login With Spotify"})]})},u=a(3),l=(a(42),function(e){var t=e.albumImage,a=e.artistName,n=e.songName,c=e.itemUri,s=e.handleClick;return Object(i.jsxs)("div",{className:"individual-song",onClick:function(){return s(c)},children:[Object(i.jsx)("img",{src:t,alt:"Album Cover"}),Object(i.jsxs)("div",{className:"song-artist-text",children:[Object(i.jsx)("p",{children:n}),Object(i.jsx)("p",{children:a})]})]})}),d=(a(43),function(e){var t=e.artistName,a=e.artistImage;return Object(i.jsxs)("div",{className:"individual-artist",children:[Object(i.jsx)("h1",{className:"artist-text",children:t}),Object(i.jsx)("img",{src:a,alt:"artist pic"})]})}),j=a(25),b=a.n(j),f=a(34),m=function(e){var t=e.accessToken,a=e.selectedSongUri,c=Object(n.useState)(!1),s=Object(u.a)(c,2),r=s[0],o=s[1];return Object(n.useEffect)((function(){o(!0)}),[a]),t?Object(i.jsx)("div",{children:Object(i.jsx)(f.a,{token:t,uris:a?[a]:null,showSaveIcon:!0,callback:function(e){e.isPlaying||o(!1)},play:r})}):null},h=a(10),O=a.n(h);a(97);var g=new b.a({clientId:"7edf92de95194f8a8d4da091d1380be9"}),p=function(e){var t=function(e){var t=Object(n.useState)(),a=Object(u.a)(t,2),c=a[0],s=a[1],i=Object(n.useState)(),r=Object(u.a)(i,2),o=r[0],l=r[1],d=Object(n.useState)(),j=Object(u.a)(d,2),b=j[0],f=j[1];return Object(n.useEffect)((function(){O.a.post("/login",{code:e}).then((function(e){s(e.data.accessToken),l(e.data.refreshToken),f(e.data.expiresIn),window.history.pushState(null,null,"/")})).catch((function(e){console.log(e)}))}),[e]),Object(n.useEffect)((function(){if(o&&b){var e=setInterval((function(){O.a.post("/refresh",{refreshToken:o}).then((function(e){s(e.data.accessToken),f(e.data.expiresIn)})).catch((function(e){console.log({error:e})}))}),1e3*(b-60));return function(){return clearInterval(e)}}}),[o,b]),c}(e.code),a=Object(n.useState)(""),c=Object(u.a)(a,2),s=c[0],r=c[1],o=Object(n.useState)([]),j=Object(u.a)(o,2),b=j[0],f=j[1],h=Object(n.useState)(""),p=Object(u.a)(h,2),v=p[0],x=p[1],N=Object(n.useState)([]),y=Object(u.a)(N,2),k=y[0],S=y[1],I=Object(n.useState)(),w=Object(u.a)(I,2),T=w[0],E=w[1],U=function(e){E(e)};Object(n.useEffect)((function(){t&&g.setAccessToken(t)}),[t]),Object(n.useEffect)((function(){t&&g.getMe().then((function(e){var t=e.body.display_name;x(t.split(" ")[0])})).catch((function(e){console.log({error:e})}))}),[t]),Object(n.useEffect)((function(){t&&g.getMyTopArtists({limit:10}).then((function(e){var t=e.body.items;S(t.map((function(e){return{id:e.id,image:e.images[2].url,name:e.name}})))})).catch((function(e){console.log(e)}))}),[t]),Object(n.useEffect)((function(){s&&g.searchTracks(s).then((function(e){var t=e.body.tracks.items;f(t.map((function(e){return{id:e.id,itemUri:e.uri,songName:e.name,albumImage:e.album.images[2].url,artistName:e.artists[0].name}})))})).catch((function(e){console.log(e)}))}),[s,t]);var C=b.map((function(e){return Object(i.jsx)(l,{itemUri:e.itemUri,albumImage:e.albumImage,artistName:e.artistName,songName:e.songName,handleClick:U},e.id)})),A=k.map((function(e){return Object(i.jsx)(d,{artistImage:e.image,artistName:e.name},e.id)}));return Object(i.jsxs)("div",{className:"dashboard-container",children:[Object(i.jsxs)("div",{className:"dashboard-header-bg",children:[Object(i.jsxs)("h1",{className:"dashboard-header",children:["Welcome, ",v,"!"]}),Object(i.jsx)("h4",{className:"top-artists-header",children:s?null:"Your top artists are listed below!"}),Object(i.jsx)("input",{className:"search-bar",placeholder:"Search for Artists/Songs...",value:s,onChange:function(e){return r(e.target.value)}})]}),Object(i.jsx)("div",{className:s?"songs-container":"top-artists-container",children:s?C:A}),Object(i.jsx)(m,{accessToken:t,selectedSongUri:T})]})},v=(a(98),new URLSearchParams(window.location.search).get("code")),x=function(){return v?Object(i.jsx)(p,{code:v}):Object(i.jsx)(o,{})};s.a.render(Object(i.jsx)(x,{}),document.getElementById("root"))}},[[99,1,2]]]);
//# sourceMappingURL=main.6204cef7.chunk.js.map